{%extends "base.html"%}
{% block sudoku_solver%}
    class="active"
{% endblock %}
{% block content %}
{% load static %}
    <!-- links -->


    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>



    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@800&family=Pacifico&family=Yellowtail&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <!-- link-end  -->
    <style type="text/css">
      
      

      .center {
        margin-left: auto;
        margin-right: auto;
      }

      html, body {
        background-color: #FAFAFA
      }

      table {
        border: 1px solid #000000;
      }

      td {
        border: 1px solid #000000;
        text-align: center;
        vertical-align: middle;  
      }

      input {
        color: #000000;
        padding: 0;
        border: 0;
        text-align: center;
        width: 48px;
        height: 48px;
        font-size: 24px;
        background-color: #FFFFFF;
        outline: none;
      }

      input:disabled {
        background-color: #EEEEEE;
      }

      #cell-0,  #cell-1,  #cell-2  { border-top:    1px solid #000000; }
      #cell-2,  #cell-11, #cell-20 { border-right:  1px solid #ffffff; }
      #cell-18, #cell-19, #cell-20 { border-bottom: 1px solid #ffffff; }
      #cell-0,  #cell-9,  #cell-18 { border-left:   1px solid #000000; }

      #cell-3,  #cell-4,  #cell-5  { border-top:    1px solid #000000; }
      #cell-5,  #cell-14, #cell-23 { border-right:  1px solid #ffffff; }
      #cell-21, #cell-22, #cell-23 { border-bottom: 1px solid #ffffff; }
      #cell-3,  #cell-12, #cell-21 { border-left:   1px solid #000000; }

      #cell-6,  #cell-7,  #cell-8  { border-top:    1px solid #000000; }
      #cell-8,  #cell-17, #cell-26 { border-right:  1px solid #000000; }
      #cell-24, #cell-25, #cell-26 { border-bottom: 1px solid #ffffff; }
      #cell-6,  #cell-15, #cell-24 { border-left:   1px solid #000000; }

      #cell-27, #cell-28, #cell-29 { border-top:    1px solid #000000; }
      #cell-29, #cell-38, #cell-47 { border-right:  1px solid #ffffff; }
      #cell-45, #cell-46, #cell-47 { border-bottom: 1px solid #ffffff; }
      #cell-27, #cell-36, #cell-45 { border-left:   1px solid #000000; }

      #cell-30, #cell-31, #cell-32 { border-top:    1px solid #000000; }
      #cell-32, #cell-41, #cell-50 { border-right:  1px solid #ffffff; }
      #cell-48, #cell-49, #cell-50 { border-bottom: 1px solid #ffffff; }
      #cell-30, #cell-39, #cell-48 { border-left:   1px solid #000000; }

      #cell-33, #cell-34, #cell-35 { border-top:    1px solid #000000; }
      #cell-35, #cell-44, #cell-53 { border-right:  1px solid #000000; }
      #cell-51, #cell-52, #cell-53 { border-bottom: 1px solid #ffffff; }
      #cell-33, #cell-42, #cell-51 { border-left:   1px solid #000000; }

      #cell-54, #cell-55, #cell-56 { border-top:    1px solid #000000; }
      #cell-56, #cell-65, #cell-74 { border-right:  1px solid #ffffff; }
      #cell-72, #cell-73, #cell-74 { border-bottom: 1px solid #000000; }
      #cell-54, #cell-63, #cell-72 { border-left:   1px solid #000000; }

      #cell-57, #cell-58, #cell-59 { border-top:    1px solid #000000; }
      #cell-59, #cell-68, #cell-77 { border-right:  1px solid #ffffff; }
      #cell-75, #cell-76, #cell-77 { border-bottom: 1px solid #000000; }
      #cell-57, #cell-66, #cell-75 { border-left:   1px solid #000000; }

      #cell-60, #cell-61, #cell-62 { border-top:    1px solid #000000; }
      #cell-62, #cell-71, #cell-80 { border-right:  1px solid #000000; }
      #cell-78, #cell-79, #cell-80 { border-bottom: 1px solid #000000; }
      #cell-60, #cell-69, #cell-78 { border-left:   1px solid #000000; }

      .heading{
        font-size:50px ;
        color: rgb(255, 255, 255);
        font-family: 'Comfortaa', cursive;
      font-family: 'Pacifico', cursive;
      font-family: 'Yellowtail', cursive;
    }
    .containermanual {
      height: 200px;
    }
    
    .vertical-center {
      margin: 0;
      position: relative;
      top: 50%;
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
    }

    .notes{
      font-size: 13px;
      font-family: 'Montserrat', sans-serif;
    }

    .loader {
      border: 7px solid #f3f3f3;
      opacity: 0.7;
      border-radius: 50%;
      border-top: 7px solid #000000;
      width: 50px;
      height: 50px;
      -webkit-animation: spin 2s linear infinite; /* Safari */
      animation: spin 2s linear infinite;
    }
    
    /* Safari */
    @-webkit-keyframes spin {
      0% { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

  
    </style>
    
      
      
      <p class="text-center heading">Sudoku Solver</p>
      <div class=" container" style="width: 100%;margin-bottom: 20em;">
      <form id="gridform" action="POST">
        {%csrf_token%}
        <div  style="width: 50%; height: 100px; float: right;">
      <table id="grid" class="center col-md-6" >

        <tr>
          <td><input id="cell-0" name="cell-0"  type="text"></td>
          <td><input id="cell-1" name="cell-1" type="text"></td>
          <td><input id="cell-2" name="cell-2"  type="text"></td>
          
          <td><input id="cell-3" name="cell-3"  type="text"></td>
          <td><input id="cell-4" name="cell-4"  type="text"></td>
          <td><input id="cell-5" name="cell-5"  type="text"></td>
          
          <td><input id="cell-6" name="cell-6"  type="text"></td>
          <td><input id="cell-7" name="cell-7"  type="text"></td>
          <td><input id="cell-8" name="cell-8"  type="text"></td>
        </tr>

        <tr>
          <td><input id="cell-9" name="cell-9"  type="text"></td>
          <td><input id="cell-10" name="cell-10" type="text"></td>
          <td><input id="cell-11" name="cell-11" type="text"></td>
          
          <td><input id="cell-12" name="cell-12" type="text"></td>
          <td><input id="cell-13" name="cell-13" type="text"></td>
          <td><input id="cell-14" name="cell-14" type="text"></td>
          
          <td><input id="cell-15" name="cell-15" type="text"></td>
          <td><input id="cell-16" name="cell-16" type="text"></td>
          <td><input id="cell-17" name="cell-17" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-18" name="cell-18" type="text"></td>
          <td><input id="cell-19" name="cell-19" type="text"></td>
          <td><input id="cell-20" name="cell-20" type="text"></td>
          
          <td><input id="cell-21" name="cell-21" type="text"></td>
          <td><input id="cell-22" name="cell-22" type="text"></td>
          <td><input id="cell-23" name="cell-23" type="text"></td>
          
          <td><input id="cell-24" name="cell-24" type="text"></td>
          <td><input id="cell-25" name="cell-25" type="text"></td>
          <td><input id="cell-26" name="cell-26" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-27" name="cell-27" type="text"></td>
          <td><input id="cell-28" name="cell-28" type="text"></td>
          <td><input id="cell-29" name="cell-29" type="text"></td>
          
          <td><input id="cell-30" name="cell-30" type="text"></td>
          <td><input id="cell-31" name="cell-31" type="text"></td>
          <td><input id="cell-32" name="cell-32" type="text"></td>
          
          <td><input id="cell-33" name="cell-33" type="text"></td>
          <td><input id="cell-34" name="cell-34" type="text"></td>
          <td><input id="cell-35" name="cell-35" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-36" name="cell-36" type="text"></td>
          <td><input id="cell-37" name="cell-37" type="text"></td>
          <td><input id="cell-38" name="cell-38" type="text"></td>
          
          <td><input id="cell-39" name="cell-39" type="text"></td>
          <td><input id="cell-40" name="cell-40" type="text"></td>
          <td><input id="cell-41" name="cell-41" type="text"></td>
          
          <td><input id="cell-42" name="cell-42" type="text"></td>
          <td><input id="cell-43" name="cell-43" type="text"></td>
          <td><input id="cell-44" name="cell-44" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-45" name="cell-45" type="text"></td>
          <td><input id="cell-46" name="cell-46" type="text"></td>
          <td><input id="cell-47" name="cell-47" type="text"></td>
          
          <td><input id="cell-48" name="cell-48" type="text"></td>
          <td><input id="cell-49" name="cell-49" type="text"></td>
          <td><input id="cell-50" name="cell-50" type="text"></td>
          
          <td><input id="cell-51" name="cell-51" type="text"></td>
          <td><input id="cell-52" name="cell-52" type="text"></td>
          <td><input id="cell-53" name="cell-53" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-54" name="cell-54" type="text"></td>
          <td><input id="cell-55" name="cell-55" type="text"></td>
          <td><input id="cell-56" name="cell-56" type="text"></td>
          
          <td><input id="cell-57" name="cell-57" type="text"></td>
          <td><input id="cell-58" name="cell-58" type="text"></td>
          <td><input id="cell-59" name="cell-59" type="text"></td>
          
          <td><input id="cell-60" name="cell-60" type="text"></td>
          <td><input id="cell-61" name="cell-61" type="text"></td>
          <td><input id="cell-62" name="cell-62" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-63" name="cell-63" type="text"></td>
          <td><input id="cell-64" name="cell-64" type="text"></td>
          <td><input id="cell-65" name="cell-65" type="text"></td>
          
          <td><input id="cell-66" name="cell-66" type="text"></td>
          <td><input id="cell-67" name="cell-67" type="text"></td>
          <td><input id="cell-68" name="cell-68" type="text"></td>
          
          <td><input id="cell-69" name="cell-69" type="text"></td>
          <td><input id="cell-70" name="cell-70" type="text"></td>
          <td><input id="cell-71" name="cell-71" type="text"></td>
        </tr>

        <tr>          
          <td><input id="cell-72" name="cell-72" type="text"></td>
          <td><input id="cell-73" name="cell-73" type="text"></td>
          <td><input id="cell-74" name="cell-74" type="text"></td>
          
          <td><input id="cell-75" name="cell-75" type="text"></td>
          <td><input id="cell-76" name="cell-76" type="text"></td>
          <td><input id="cell-77" name="cell-77" type="text"></td>
          
          <td><input id="cell-78" name="cell-78" type="text"></td>
          <td><input id="cell-79" name="cell-79" type="text"></td>
          <td><input id="cell-80" name="cell-80" type="text"></td>
        </tr>

      </table>
    </div> 
    
    <div style="margin-right: 50%; height: 100px; float:left;">
    <p style="margin-left: 10px;" class="notes"><b>Notes:<br>
      * Enter the given values in the grid.<br>
      * Hit "Solve Grid"<br>
      * The lesser the given values the more time it takes.<br>
      <br></b>
     </p>
      <div class="" style="margin-left: 10px;">
        <button type="button" class="btn btn-primary btn-lg" id="submit_button" onclick="submitdata()">Solve Grid</button>
        <div class="loader" style="margin-left: 30px;"></div>
      </div>
    </div> 
  </div>
  </form>
  

  <script>
    $(document).ready(function(){
      $(".loader").hide()
    })

    function submitdata(){
    var formData = new FormData($("#gridform").get(0));
    $("#submit_button").hide()
    $(".loader").show()
    $.ajax({
      url:"/srv/solvesudoku",
      type:"POST",
      data:formData,
      processData: false,
      contentType: false,
      success:function(response){
        console.log("Response Recieved.")
        $("#submit_button").show()
        $(".loader").hide()
        var response = JSON.parse(response)
        for(i=0;i<81;i++){
          str_id = "#cell-"+String(i)
          val_id = "cell" + String(i)
          $(str_id).val(response[val_id])
        }
      }
    })
  }
  </script>
{%endblock%}